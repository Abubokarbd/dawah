<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶® ‡¶π‡¶ø‡¶´‡¶ú ‡¶∞‡¶ø‡¶°‡¶æ‡¶∞</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Hind Siliguri', sans-serif;
  background-color: #fafafa;
  color: #222;
  margin: 0;
  padding: 10px;
}
h2 {
  text-align: center;
  margin: 10px 0;
}
.quran-container {
  background: #fff;
  border-radius: 10px;
  padding: 15px;
  box-shadow: 0 0 8px rgba(0,0,0,0.1);
  margin-bottom: 15px;
}
.ayah {
  margin-bottom: 10px;
  border-bottom: 1px solid #eee;
  padding-bottom: 8px;
}
.loading {
  text-align: center;
  margin-top: 40px;
  font-size: 18px;
}
.error {
  color: red;
  text-align: center;
}
</style>
</head>

<body>
<h2>üìñ ‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶® ‡¶π‡¶ø‡¶´‡¶ú ‡¶∞‡¶ø‡¶°‡¶æ‡¶∞</h2>
<div id="content">
  <div class="loading">‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
</div>

<script>
// API URL (‡¶ö‡¶æ‡¶ì‡¶≤‡ßá ‡¶®‡¶ø‡¶ú‡¶∏‡ßç‡¶¨ ‡¶π‡¶ø‡¶´‡¶ú API ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã)
const API_URL = "https://api.alquran.cloud/v1/page/1/quran-uthmani";

const content = document.getElementById('content');

async function loadQuran() {
    try {
        const res = await fetch(API_URL);
        const data = await res.json();

        if (data && data.data && data.data.ayahs) {
            displayAyahs(data.data.ayahs);
            // First-time offline save
            localStorage.setItem("quranData", JSON.stringify(data));
        } else {
            throw "No data";
        }
    } catch (e) {
        console.log("Error:", e);
        const cached = localStorage.getItem("quranData");
        if (cached) {
            const data = JSON.parse(cached);
            displayAyahs(data.data.ayahs, true);
        } else {
            content.innerHTML = `<div class="error">‚ö†Ô∏è ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶®‡ßá‡¶á ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßã‡¶®‡ßã ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶®‡ßá‡¶á‡•§</div>`;
        }
    }
}

function displayAyahs(ayahs, offline=false) {
    let html = '';
    ayahs.forEach(a => {
        html += `
        <div class="quran-container">
            <div class="ayah">
                <p style="font-size:22px; direction:rtl;">${a.text}</p>
                <p>‡¶∏‡ßÇ‡¶∞‡¶æ: ${a.surah.englishName} ‚Äî ‡¶Ü‡ßü‡¶æ‡¶§: ${a.numberInSurah}</p>
            </div>
        </div>`;
    });
    content.innerHTML = offline ? `<h4 style="text-align:center;">(‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶® ‡¶Æ‡ßã‡¶°)</h4>` + html : html;
}

loadQuran();
</script>
</body>
</html>