<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>দাওয়াহ</title>

  <!-- SEO & Social Meta -->
  <meta name="description" content="দাওয়াহ অ্যাপ: ইসলামী আয়াত ও হাদীসের সহজ তালিকা">
  <meta name="keywords" content="দাওয়াহ, ইসলাম, আয়াত, হাদীস, বাংলা, অ্যাপ, ওয়েবভিউ">
  <meta name="author" content="Abubokar">
  <meta property="og:title" content="দাওয়াহ অ্যাপ হোম">
  <meta property="og:description" content="আপনার কণ্ঠের প্রস্তুতি — ইসলামী আয়াত ও হাদীস">
  <meta property="og:image" content="https://abubokarbd.github.io/dawah/logo.png">
  <meta property="og:url" content="https://abubokarbd.github.io/dawah/index.html">

  <!-- App Icon & Favicon -->
  <link rel="icon" href="https://abubokarbd.github.io/dawah/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://abubokarbd.github.io/dawah/app-icon.png">
  <link rel="manifest" href="manifest.json">

  <!-- Hind Siliguri ফন্ট -->
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Hind Siliguri', sans-serif;
    background-color: #033E3E;
    color: #FFFFFF;
    text-align: center;
    margin: 0;
    padding: 0;
  }

  #loader {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #033E3E;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }

  .container {
    max-width: 960px;
    margin: auto;
    padding: 20px;
  }

  .app-title {
    font-size: 48px;
    margin-top: 10px;
    color: #00FFFF;
    font-weight: bold;
  }

  .app-subtitle {
    font-size: 20px;
    color: #AADDEE;
    margin-top: -10px;
    margin-bottom: 10px;
  }

  .date-widget {
    margin-top: 10px;
    margin-bottom: -5px;
    min-height: 60px; /* উইজেট না লোড হলে জায়গা রাখতে */
  }

  .date-widget-fallback {
    font-size: 16px;
    color: #AADDEE;
    display: none; /* ডিফল্টভাবে লুকানো */
  }

  .scrolling-text {
    font-size: 18px;
    color: #AADDEE;
    white-space: nowrap;
    overflow: hidden;
    width: 100%;
    background: rgba(0,0,0,0.2);
    padding: 10px 0;
  }

  .scrolling-text span {
    display: inline-block;
    padding-left: 100%;
    animation: scroll-left 25s linear infinite;
  }

  @keyframes scroll-left {
    from { transform: translateX(0); }
    to { transform: translateX(-100%); }
  }

  .button-row {
    display: grid;
    grid-template-columns: repeat(3, minmax(100px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }

  a.button {
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    background: linear-gradient(145deg, #046868, #022B2B);
    color: white;
    padding: 10px 8px;
    border-radius: 14px;
    font-size: 20px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    line-height: 1.4;
  }

  a.button:hover {
    background: linear-gradient(145deg, #0AAFAF, #055050);
    transform: translateY(-3px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.4);
  }

  a.button:active {
    transform: scale(0.97);
  }

  @media (max-width: 600px) {
    a.button {
      font-size: 18px;
      padding: 14px 8px;
      min-height: 90px;
    }
    
    .button-row {
      grid-template-columns: repeat(3, minmax(80px, 1fr));
      gap: 10px;
    }
  }

  .about-button {
    display: inline-block;
    text-decoration: none;
    background: linear-gradient(145deg, #046868, #022B2B);
    color: white;
    padding: 8px 20px;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    margin-bottom: 10px;
  }

  .about-button:hover {
    background: linear-gradient(145deg, #0AAFAF, #055050);
    transform: translateY(-2px);
    box-shadow: 0 5px 12px rgba(0,0,0,0.4);
  }

  .about-button:active {
    transform: scale(0.97);
  }

  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-thumb {
    background-color: #00FFFF;
    border-radius: 3px;
  }

  footer {
    margin-top: 20px;
    font-size: 14px;
    color: #CCCCCC;
  }

  footer a {
    color: #00FFFF;
    text-decoration: none;
  }

  .counter-row {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-top: 10px;
    font-size: 16px;
    color: #00FFFF;
  }

  /* পপআপ স্টাইল */
  .popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(145deg, #046868, #022B2B);
    color: #FFFFFF;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 6px 14px rgba(0,0,0,0.4);
    z-index: 1000; /* z-index কমানো হয়েছে */
    max-width: 90%;
    width: 300px;
    text-align: center;
    font-family: 'Hind Siliguri', sans-serif;
    font-size: 16px;
  }

  .popup-content {
    margin-bottom: 15px;
  }

  .popup-close {
    background: #00FFFF;
    color: #033E3E;
    border: none;
    padding: 8px 16px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: background 0.3s ease;
  }

  .popup-close:hover {
    background: #0AAFAF;
  }

  @media (max-width: 600px) {
    .popup {
      width: 80%;
      font-size: 14px;
      padding: 15px;
    }
  }
</style>
</head>

<body>
<div id="loader"><h2 style="color:#00FFFF;">লোড হচ্ছে...</h2></div>

<div class="container">
  <div class="app-title">দাওয়াহ</div>
  <div class="app-subtitle">আপনার কণ্ঠের প্রস্তুতি</div>

  <div class="date-widget">
    <iframe id="dateWidget" src="https://abubokarbd.github.io/tools/bangla-hijri-eng-date-widget.html" 
            style="width:100%; height:60px; border:none; background:transparent; overflow:hidden;" 
            scrolling="no"></iframe>
    <div id="dateWidgetFallback" class="date-widget-fallback">
      তারিখ লোড করতে ব্যর্থ। দয়া করে পুনরায় চেষ্টা করুন।
    </div>
  </div>

  <div class="scrolling-text">
    <span>আসসালামুয়ালাইকুম, দাওয়াহ মোবাইল এপসে আপনাকে স্বাগতম। মতামত জানাতে ডেভেলপার বাটনে মেসেজ দিন।</span>
  </div>

  <h2>সংক্ষিপ্ত আয়াত তালিকা</h2>
  <div class="button-row">
    <a href="https://abubokarbd.github.io/rco/verse.html" class="button">আয়াত<br>গুচ্ছ<br>১</a>
    <a href="https://abubokarbd.github.io/rco/verse1.html" class="button">আয়াত<br>গুচ্ছ<br>২</a>
    <a href="https://abubokarbd.github.io/rco/verse1.html" class="button">আয়াত<br>গুচ্ছ<br>৩</a>
  </div>

  <h2>বিষয় ভিত্তিক আয়াত ও হাদীস</h2>
  <div class="button-row">
    <a href="1-faith.html" class="button">আক্বিদা <br>ও <br>বিশ্বাস</a>
    <a href="2.ibadah.html" class="button">ইবাদাত <br>বা <br>বন্দেগী</a>
    <a href="3-akhlaq.html" class="button">আখলাক <br>ও <br>নৈতিকতা</a>
    <a href="4-ethics.html" class="button">সম্প্রীতি <br>ও <br>আচরণ</a>
  </div>

  <h2>খুতবাহ ও দারস</h2>
  <div class="button-row">
    <a href="khutba-list.html" class="button">খুতবা <br>তালিকা</a>
    <a href="on-test-page.html" class="button">দারসুল<br>কুরআন</a>
    <a href="on-test-page.html" class="button">দারসুল<br>হাদিস</a>
  </div>

  <h2>আমল ও অন্যান্য</h2> 
  <div class="button-row">
    <a href="on-test-page.html" class="button">সকাল <br>সন্ধ্যার <br>আমল</a>
    <a href="on-test-page.html" class="button">অর্থসহ <br>নামাজের <br>দোয়া</a>
    <a href="on-test-page.html" class="button">কুরআনের <br>ছোট <br>সুরা</a>
  </div>

  <footer>
    <a href="#" class="about-button" onclick="shareApp(); return false;">App Share</a>
    <p>
      © ২০২৫ দাওয়াহ | ডেভেলপার: <a href="https://abubokarbd.github.io/kankirhat/deve.html">মুহা আবুবকর ছিদ্দিক</a>
    </p>
    <div class="counter-row">
      <span id="visitor-count">ভিজিটরস: ...</span> |
      <span id="online-count">অনলাইনে: ... জন</span>
    </div>
  </footer>

  <!-- পপআপ HTML -->
  <div id="sharePopup" class="popup">
    <div class="popup-content">
      এই ব্রাউজারে শেয়ার ফিচার সমর্থিত নয়।<br>লিঙ্ক কপি হয়েছে!
    </div>
    <button class="popup-close" onclick="closePopup()">বন্ধ করুন</button>
  </div>

  <!-- Loader Script -->
  <script>
    window.addEventListener('load', function() {
      document.getElementById('loader').style.display = 'none';
      checkIframeLoad(); // উইজেট লোড চেক করা
    });
  </script>

  <!-- popup.js লোড -->
  <script src="https://abubokarbd.github.io/rco/popup.js"></script>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAx_Yl-Qdd5RABXAxBwwByNW0dnrcBkpV0",
      authDomain: "dawah-352eb.firebaseapp.com",
      databaseURL: "https://dawah-352eb-default-rtdb.firebaseio.com",
      projectId: "dawah-352eb",
      storageBucket: "dawah-352eb.appspot.com",
      messagingSenderId: "129702043179",
      appId: "1:129702043179:web:6318cd5c1b3c200810946e",
      measurementId: "G-Z0E49NGVDG"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Visitor Counter
    const visitorRef = db.ref("visitorCount");
    const today = new Date().toDateString();
    if (localStorage.getItem('lastVisit') !== today) {
      visitorRef.transaction(current => (current || 0) + 1);
      localStorage.setItem('lastVisit', today);
    }

    visitorRef.on("value", snapshot => {
      const count = snapshot.val();
      const visitorEl = document.getElementById("visitor-count");
      if (visitorEl) visitorEl.innerText = "ভিজিটরস: " + count;
    });

    // Online User Tracker
    const onlineRef = db.ref("onlineUsers");
    let userId = localStorage.getItem('dawahUserId');
    if (!userId) {
      userId = "user_" + Math.random().toString(36).substr(2, 9);
      localStorage.setItem('dawahUserId', userId);
    }
    onlineRef.child(userId).set(true);
    onlineRef.child(userId).onDisconnect().remove();

    onlineRef.on("value", snapshot => {
      const onlineCount = snapshot.numChildren();
      const onlineEl = document.getElementById("online-count");
      if (onlineEl) onlineEl.innerText = "অনলাইনে: " + onlineCount + " জন";
    });

    // উইজেট লোড চেক করার ফাংশন
    function checkIframeLoad() {
      const iframe = document.getElementById('dateWidget');
      const fallback = document.getElementById('dateWidgetFallback');
      iframe.addEventListener('load', () => {
        console.log('উইজেট লোড হয়েছে');
      });
      setTimeout(() => {
        if (!iframe.contentWindow || iframe.contentWindow.document.body.innerHTML.includes('তারিখ লোড হচ্ছে...')) {
          iframe.style.display = 'none';
          fallback.style.display = 'block';
        }
      }, 5000); // ৫ সেকেন্ড পর চেক
    }

    // App Share Functionality with Custom Popup
    async function shareApp() {
      const shareUrl = 'https://drive.google.com/file/d/1N3HbNdnuFohRSyaSd_wd05aNBJVdCWBq/view';
      const shareData = {
        title: 'দাওয়াহ অ্যাপ',
        text: 'দাওয়াহ অ্যাপ ডাউনলোড করুন এই লিঙ্ক থেকে! এটি ইসলামী আয়াত ও হাদীসের সংগ্রহ।',
        url: shareUrl
      };

      // Copy the link to clipboard
      try {
        await navigator.clipboard.writeText(shareUrl);
        console.log('লিঙ্ক কপি হয়েছে');
      } catch (err) {
        console.error('কপি করতে সমস্যা: ', err);
      }

      // Trigger share dialog
      if (navigator.share) {
        try {
          await navigator.share(shareData);
          console.log('শেয়ার সফল হয়েছে');
        } catch (err) {
          console.error('শেয়ার করতে সমস্যা: ', err);
          showPopup();
        }
      } else {
        showPopup();
      }
    }

    // পপআপ দেখানোর ফাংশন
    function showPopup() {
      const popup = document.getElementById('sharePopup');
      if (popup) {
        popup.style.display = 'block';
        setTimeout(() => {
          popup.style.display = 'none';
        }, 3000); // ৩ সেকেন্ড পর বন্ধ
      } else {
        // ফলব্যাক অ্যালার্ট
        alert('লিঙ্ক কপি হয়েছে: এইবার অন্যদের সাথে শেয়ার করুন।  ' + 'https://drive.google.com/file/d/1N3HbNdnuFohRSyaSd_wd05aNBJVdCWBq/view');
      }
    }

    // পপআপ বন্ধ করার ফাংশন
    function closePopup() {
      const popup = document.getElementById('sharePopup');
      if (popup) {
        popup.style.display = 'none';
      }
    }
  </script>
</div>
</body>
</html>
