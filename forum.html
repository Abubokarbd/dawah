<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>দাওয়াহ - কমেন্ট ফোরাম</title>

  <!-- SEO & Social Meta -->
  <meta name="description" content="দাওয়াহ অ্যাপ: ইসলামী বিষয়ে কমেন্ট ফোরাম">
  <meta name="keywords" content="দাওয়াহ, ইসলাম, কমেন্ট, ফোরাম, বাংলা">
  <meta name="author" content="Abubokar">
  <meta property="og:title" content="দাওয়াহ কমেন্ট ফোরাম">
  <meta property="og:description" content="ইসলামী বিষয়ে আলোচনার জন্য দাওয়াহ ফোরামে যোগ দিন">
  <meta property="og:image" content="https://abubokarbd.github.io/dawah/logo.png">
  <meta property="og:url" content="https://abubokarbd.github.io/dawah/comment-forum.html">

  <!-- App Icon & Favicon -->
  <link rel="icon" href="https://abubokarbd.github.io/dawah/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://abubokarbd.github.io/dawah/app-icon.png">

  <!-- Hind Siliguri ফন্ট -->
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Hind Siliguri', sans-serif;
      background-color: #033E3E;
      color: #FFFFFF;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    #loader {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #033E3E;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .container {
      max-width: 960px;
      margin: auto;
      padding: 20px;
    }

    .app-title {
      font-size: 48px;
      margin-top: 10px;
      color: #00FFFF;
      font-weight: bold;
    }

    .app-subtitle {
      font-size: 20px;
      color: #AADDEE;
      margin-top: -10px;
      margin-bottom: 20px;
    }

    .comment-form {
      margin: 20px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .comment-form input, .comment-form textarea {
      width: 100%;
      max-width: 500px;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #022B2B;
      color: #FFFFFF;
      font-family: 'Hind Siliguri', sans-serif;
      font-size: 16px;
    }

    .comment-form textarea {
      min-height: 100px;
      resize: vertical;
    }

    .comment-form button {
      background: linear-gradient(145deg, #046868, #022B2B);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }

    .comment-form button:hover {
      background: linear-gradient(145deg, #0AAFAF, #055050);
      transform: translateY(-2px);
      box-shadow: 0 5px 12px rgba(0,0,0,0.4);
    }

    .comment-form button:active {
      transform: scale(0.97);
    }

    .comment-list {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .comment {
      background: linear-gradient(145deg, #046868, #022B2B);
      padding: 15px;
      border-radius: 10px;
      text-align: left;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .comment-header {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #AADDEE;
      margin-bottom: 10px;
    }

    .comment-body {
      font-size: 16px;
      color: #FFFFFF;
    }

    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(145deg, #046868, #022B2B);
      color: #FFFFFF;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.4);
      z-index: 1000;
      max-width: 90%;
      width: 300px;
      text-align: center;
      font-family: 'Hind Siliguri', sans-serif;
      font-size: 16px;
    }

    .popup-content {
      margin-bottom: 15px;
    }

    .popup-close {
      background: #00FFFF;
      color: #033E3E;
      border: none;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background 0.3s ease;
    }

    .popup-close:hover {
      background: #0AAFAF;
    }

    @media (max-width: 600px) {
      .app-title {
        font-size: 36px;
      }

      .app-subtitle {
        font-size: 18px;
      }

      .comment-form input, .comment-form textarea {
        font-size: 14px;
      }

      .comment-form button {
        font-size: 14px;
        padding: 8px 16px;
      }

      .comment {
        padding: 10px;
      }

      .comment-body {
        font-size: 14px;
      }

      .popup {
        width: 80%;
        font-size: 14px;
        padding: 15px;
      }
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-thumb {
      background-color: #00FFFF;
      border-radius: 3px;
    }
  </style>
</head>

<body>
  <div id="loader"><h2 style="color:#00FFFF;">লোড হচ্ছে...</h2></div>

  <div class="container">
    <div class="app-title">দাওয়াহ ফোরাম</div>
    <div class="app-subtitle">ইসলামী বিষয়ে আলোচনা করুন</div>

    <!-- কমেন্ট ফর্ম -->
    <div class="comment-form">
      <input type="text" id="userName" placeholder="আপনার নাম (ঐচ্ছিক)" maxlength="50">
      <textarea id="commentText" placeholder="আপনার মন্তব্য লিখুন..." maxlength="500"></textarea>
      <button onclick="submitComment()">মন্তব্য জমা দিন</button>
    </div>

    <!-- কমেন্ট লিস্ট -->
    <div class="comment-list" id="commentList"></div>

    <!-- পপআপ -->
    <div id="popup" class="popup">
      <div class="popup-content" id="popupMessage"></div>
      <button class="popup-close" onclick="closePopup()">বন্ধ করুন</button>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // লোডার স্ক্রিপ্ট
    window.addEventListener('load', function() {
      document.getElementById('loader').style.display = 'none';
    });

    // Firebase কনফিগারেশন
    const firebaseConfig = {
      apiKey: "AIzaSyAx_Yl-Qdd5RABXAxBwwByNW0dnrcBkpV0",
      authDomain: "dawah-352eb.firebaseapp.com",
      databaseURL: "https://dawah-352eb-default-rtdb.firebaseio.com",
      projectId: "dawah-352eb",
      storageBucket: "dawah-352eb.appspot.com",
      messagingSenderId: "129702043179",
      appId: "1:129702043179:web:6318cd5c1b3c200810946e",
      measurementId: "G-Z0E49NGVDG"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const commentsRef = db.ref('comments');

    // কমেন্ট জমা দেওয়ার ফাংশন
    function submitComment() {
      const nameInput = document.getElementById('userName');
      const commentInput = document.getElementById('commentText');
      const name = nameInput.value.trim() || 'অজ্ঞাত';
      const comment = commentInput.value.trim();

      if (!comment) {
        showPopup('দয়া করে একটি মন্তব্য লিখুন!');
        return;
      }

      const timestamp = new Date().toISOString();
      const commentData = {
        name: name,
        comment: comment,
        timestamp: timestamp
      };

      commentsRef.push(commentData).then(() => {
        showPopup('মন্তব্য সফলভাবে জমা দেওয়া হয়েছে!');
        nameInput.value = '';
        commentInput.value = '';
      }).catch(error => {
        showPopup('মন্তব্য জমা দিতে সমস্যা: ' + error.message);
      });
    }

    // কমেন্ট লোড করার ফাংশন
    commentsRef.on('value', snapshot => {
      const commentList = document.getElementById('commentList');
      commentList.innerHTML = '';
      const comments = snapshot.val();
      if (comments) {
        Object.entries(comments).reverse().forEach(([key, data]) => {
          const commentDiv = document.createElement('div');
          commentDiv.className = 'comment';
          const date = new Date(data.timestamp);
          commentDiv.innerHTML = `
            <div class="comment-header">
              <span>${data.name}</span>
              <span>${date.toLocaleString('bn-BD')}</span>
            </div>
            <div class="comment-body">${data.comment}</div>
          `;
          commentList.appendChild(commentDiv);
        });
      } else {
        commentList.innerHTML = '<p>কোনো মন্তব্য নেই। প্রথম মন্তব্য করুন!</p>';
      }
    });

    // পপআপ দেখানোর ফাংশন
    function showPopup(message) {
      const popup = document.getElementById('popup');
      const popupMessage = document.getElementById('popupMessage');
      popupMessage.textContent = message;
      popup.style.display = 'block';
      setTimeout(() => {
        popup.style.display = 'none';
      }, 3000);
    }

    // পপআপ বন্ধ করার ফাংশন
    function closePopup() {
      document.getElementById('popup').style.display = 'none';
    }
  </script>
</body>
</html>
