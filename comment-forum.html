<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶¶‡¶æ‡¶ì‡ßü‡¶æ‡¶π - ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶´‡ßã‡¶∞‡¶æ‡¶Æ</title>

  <!-- SEO & Social Meta -->
  <meta name="description" content="‡¶¶‡¶æ‡¶ì‡ßü‡¶æ‡¶π ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™: ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡ßá ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶´‡ßã‡¶∞‡¶æ‡¶Æ">
  <meta name="keywords" content="‡¶¶‡¶æ‡¶ì‡ßü‡¶æ‡¶π, ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ, ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü, ‡¶´‡ßã‡¶∞‡¶æ‡¶Æ, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ">
  <meta name="author" content="Abubokar">
  <meta property="og:title" content="‡¶¶‡¶æ‡¶ì‡ßü‡¶æ‡¶π ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶´‡ßã‡¶∞‡¶æ‡¶Æ">
  <meta property="og:description" content="‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡ßá ‡¶Ü‡¶≤‡ßã‡¶ö‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¶‡¶æ‡¶ì‡ßü‡¶æ‡¶π ‡¶´‡ßã‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶®">
  <meta property="og:image" content="https://abubokarbd.github.io/dawah/logo.png">
  <meta property="og:url" content="https://abubokarbd.github.io/dawah/comment-forum.html">

  <!-- App Icon & Favicon -->
  <link rel="icon" href="https://abubokarbd.github.io/dawah/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://abubokarbd.github.io/dawah/app-icon.png">

  <!-- Hind Siliguri ‡¶´‡¶®‡ßç‡¶ü -->
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Hind Siliguri', sans-serif;
      background-color: #033E3E;
      color: #FFFFFF;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    #loader {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #033E3E;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .container {
      max-width: 960px;
      margin: auto;
      padding: 20px;
    }

    .app-title {
      font-size: 48px;
      margin-top: 10px;
      color: #00FFFF;
      font-weight: bold;
    }

    .app-subtitle {
      font-size: 20px;
      color: #AADDEE;
      margin-top: -10px;
      margin-bottom: 20px;
    }

    .admin-login {
      margin: 20px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      display: none; /* ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã */
    }

    .admin-login input {
      width: 100%;
      max-width: 300px;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #022B2B;
      color: #FFFFFF;
      font-family: 'Hind Siliguri', sans-serif;
      font-size: 16px;
    }

    .admin-login button {
      background: linear-gradient(145deg, #046868, #022B2B);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }

    .admin-login button:hover {
      background: linear-gradient(145deg, #0AAFAF, #055050);
      transform: translateY(-2px);
      box-shadow: 0 5px 12px rgba(0,0,0,0.4);
    }

    .admin-login button:active {
      transform: scale(0.97);
    }

    .comment-form {
      margin: 20px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .comment-form input, .comment-form textarea {
      width: 100%;
      max-width: 500px;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #022B2B;
      color: #FFFFFF;
      font-family: 'Hind Siliguri', sans-serif;
      font-size: 16px;
    }

    .comment-form textarea {
      min-height: 100px;
      resize: vertical;
    }

    .comment-form button {
      background: linear-gradient(145deg, #046868, #022B2B);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }

    .comment-form button:hover {
      background: linear-gradient(145deg, #0AAFAF, #055050);
      transform: translateY(-2px);
      box-shadow: 0 5px 12px rgba(0,0,0,0.4);
    }

    .comment-form button:active {
      transform: scale(0.97);
    }

    .comment-list {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .comment {
      background: linear-gradient(145deg, #046868, #022B2B);
      padding: 15px;
      border-radius: 10px;
      text-align: left;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .admin-comment {
      border: 2px solid #FFD700; /* ‡¶∏‡ßã‡¶®‡¶æ‡¶≤‡ßÄ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
      background: linear-gradient(145deg, #055050, #013636);
    }

    .comment-header {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #AADDEE;
      margin-bottom: 10px;
    }

    .admin-badge {
      background: #FFD700;
      color: #033E3E;
      padding: 2px 8px;
      border-radius: 5px;
      font-size: 12px;
      margin-left: 5px;
    }

    .comment-body {
      font-size: 16px;
      color: #FFFFFF;
    }

    .comment-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .comment-actions button {
      background: linear-gradient(145deg, #046868, #022B2B);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .comment-actions button:hover {
      background: linear-gradient(145deg, #0AAFAF, #055050);
      transform: translateY(-2px);
    }

    .comment-actions button:active {
      transform: scale(0.97);
    }

    .delete-button {
      background: linear-gradient(145deg, #A10000, #700000);
      color: white;
    }

    .delete-button:hover {
      background: linear-gradient(145deg, #C10000, #900000);
      transform: translateY(-2px);
    }

    .reply-form {
      margin-top: 10px;
      display: none;
      flex-direction: column;
      gap: 10px;
    }

    .reply-form textarea {
      min-height: 60px;
    }

    .replies {
      margin-top: 10px;
      padding-left: 20px;
      border-left: 2px solid #00FFFF;
    }

    .reply {
      background: linear-gradient(145deg, #055050, #022B2B);
      padding: 10px;
      border-radius: 8px;
      margin-top: 10px;
    }

    .admin-reply {
      border: 2px solid #FFD700; /* ‡¶∏‡ßã‡¶®‡¶æ‡¶≤‡ßÄ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
      background: linear-gradient(145deg, #044444, #013636);
    }

    .reply-header {
      font-size: 13px;
      color: #AADDEE;
      margin-bottom: 5px;
    }

    .reply-body {
      font-size: 14px;
      color: #FFFFFF;
    }

    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(145deg, #046868, #022B2B);
      color: #FFFFFF;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.4);
      z-index: 1000;
      max-width: 90%;
      width: 300px;
      text-align: center;
      font-family: 'Hind Siliguri', sans-serif;
      font-size: 16px;
    }

    .popup-content {
      margin-bottom: 15px;
    }

    .popup-close {
      background: #00FFFF;
      color: #033E3E;
      border: none;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background 0.3s ease;
    }

    .popup-close:hover {
      background: #0AAFAF;
    }

    @media (max-width: 600px) {
      .app-title {
        font-size: 36px;
      }

      .app-subtitle {
        font-size: 18px;
      }

      .comment-form input, .comment-form textarea {
        font-size: 14px;
      }

      .comment-form button {
        font-size: 14px;
        padding: 8px 16px;
      }

      .admin-login input {
        font-size: 14px;
      }

      .admin-login button {
        font-size: 14px;
        padding: 8px 16px;
      }

      .comment {
        padding: 10px;
      }

      .comment-body {
        font-size: 14px;
      }

      .comment-actions button {
        font-size: 12px;
        padding: 6px 10px;
      }

      .popup {
        width: 80%;
        font-size: 14px;
        padding: 15px;
      }
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-thumb {
      background-color: #00FFFF;
      border-radius: 3px;
    }
  </style>
</head>

<body>
  <div id="loader"><h2 style="color:#00FFFF;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h2></div>

  <div class="container">
    <div class="app-title">‡¶¶‡¶æ‡¶ì‡ßü‡¶æ‡¶π ‡¶´‡ßã‡¶∞‡¶æ‡¶Æ</div>
    <div class="app-subtitle">‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡ßá ‡¶Ü‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</div>

    <!-- ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶∞‡ßç‡¶Æ -->
    <div class="admin-login" id="adminLoginForm">
      <input type="password" id="adminPassword" placeholder="‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
      <button onclick="adminLogin()">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>

    <!-- ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶´‡¶∞‡ßç‡¶Æ -->
    <div class="comment-form">
      <input type="text" id="userName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" maxlength="50">
      <textarea id="commentText" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." maxlength="500"></textarea>
      <button onclick="submitComment()">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
      <button onclick="toggleAdminLogin()">‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶®</button>
      <button onclick="adminLogout()" id="adminLogout" style="display: none;">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
    </div>

    <!-- ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü -->
    <div class="comment-list" id="commentList"></div>

    <!-- ‡¶™‡¶™‡¶Ü‡¶™ -->
    <div id="popup" class="popup">
      <div class="popup-content" id="popupMessage"></div>
      <button class="popup-close" onclick="closePopup()">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // ‡¶≤‡ßã‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü
    window.addEventListener('load', function() {
      document.getElementById('loader').style.display = 'none';
      checkAdminStatus();
    });

    // Firebase ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
    const firebaseConfig = {
      apiKey: "AIzaSyAx_Yl-Qdd5RABXAxBwwByNW0dnrcBkpV0",
      authDomain: "dawah-352eb.firebaseapp.com",
      databaseURL: "https://dawah-352eb-default-rtdb.firebaseio.com",
      projectId: "dawah-352eb",
      storageBucket: "dawah-352eb.appspot.com",
      messagingSenderId: "129702043179",
      appId: "1:129702043179:web:6318cd5c1b3c200810946e",
      measurementId: "G-Z0E49NGVDG"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const commentsRef = db.ref('comments');

    // ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°
    const ADMIN_PASSWORD = "Fahim323015"; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°

    // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü
    function getUserId() {
      let userId = localStorage.getItem('dawahUserId');
      if (!userId) {
        userId = "user_" + Math.random().toString(36).substr(2, 9);
        localStorage.setItem('dawahUserId', userId);
      }
      return userId;
    }

    // ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ö‡ßá‡¶ï
    function checkAdminStatus() {
      const isAdmin = localStorage.getItem('isAdmin') === 'true';
      const adminLoginForm = document.getElementById('adminLoginForm');
      const adminLogoutButton = document.getElementById('adminLogout');
      if (isAdmin) {
        adminLoginForm.style.display = 'none';
        adminLogoutButton.style.display = 'block';
      } else {
        adminLoginForm.style.display = 'flex';
        adminLogoutButton.style.display = 'none';
      }
    }

    // ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function adminLogin() {
      const passwordInput = document.getElementById('adminPassword');
      const password = passwordInput.value;
      if (password === ADMIN_PASSWORD) {
        localStorage.setItem('isAdmin', 'true');
        localStorage.setItem('dawahUserId', 'admin_' + Math.random().toString(36).substr(2, 9));
        showPopup('‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤!');
        checkAdminStatus();
        passwordInput.value = '';
      } else {
        showPopup('‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
      }
    }

    // ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function adminLogout() {
      localStorage.removeItem('isAdmin');
      localStorage.removeItem('dawahUserId');
      showPopup('‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶∏‡¶´‡¶≤!');
      checkAdminStatus();
    }

    // ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ü‡¶ó‡¶≤
    function toggleAdminLogin() {
      const adminLoginForm = document.getElementById('adminLoginForm');
      adminLoginForm.style.display = adminLoginForm.style.display === 'none' ? 'flex' : 'none';
    }

    // ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ
    function submitComment() {
      const nameInput = document.getElementById('userName');
      const commentInput = document.getElementById('commentText');
      const name = nameInput.value.trim() || '‡¶Ö‡¶ú‡ßç‡¶û‡¶æ‡¶§';
      const comment = commentInput.value.trim();
      const isAdmin = localStorage.getItem('isAdmin') === 'true';

      if (!comment) {
        showPopup('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!');
        return;
      }

      const timestamp = new Date().toISOString();
      const commentData = {
        name: name,
        comment: comment,
        timestamp: timestamp,
        likes: 0,
        dislikes: 0,
        isAdmin: isAdmin
      };

      commentsRef.push(commentData).then(() => {
        showPopup('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        nameInput.value = '';
        commentInput.value = '';
      }).catch(error => {
        showPopup('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ' + error.message);
      });
    }

    // ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ
    function submitReply(commentId) {
      const replyInput = document.getElementById(`replyText-${commentId}`);
      const replyText = replyInput.value.trim();
      const userName = document.getElementById(`replyName-${commentId}`).value.trim() || '‡¶Ö‡¶ú‡ßç‡¶û‡¶æ‡¶§';
      const isAdmin = localStorage.getItem('isAdmin') === 'true';

      if (!replyText) {
        showPopup('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!');
        return;
      }

      const timestamp = new Date().toISOString();
      const replyData = {
        name: userName,
        reply: replyText,
        timestamp: timestamp,
        isAdmin: isAdmin
      };

      commentsRef.child(`${commentId}/replies`).push(replyData).then(() => {
        showPopup('‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        replyInput.value = '';
        document.getElementById(`replyName-${commentId}`).value = '';
        toggleReplyForm(commentId);
      }).catch(error => {
        showPopup('‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ' + error.message);
      });
    }

    // ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ
    function deleteComment(commentId) {
      if (localStorage.getItem('isAdmin') !== 'true') {
        showPopup('‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®!');
        return;
      }
      if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
        commentsRef.child(commentId).remove().then(() => {
          showPopup('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        }).catch(error => {
          showPopup('‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ' + error.message);
        });
      }
    }

    // ‡¶≤‡¶æ‡¶á‡¶ï/‡¶°‡¶ø‡¶∏‡¶≤‡¶æ‡¶á‡¶ï ‡¶ü‡¶ó‡¶≤
    function toggleLike(commentId, type) {
      const userId = getUserId();
      const likeRef = db.ref(`comments/${commentId}/userVotes/${userId}`);
      likeRef.transaction(current => {
        if (!current) {
          return { type: type, timestamp: Date.now() };
        } else if (current.type === type) {
          return null; // Remove vote
        } else {
          return { type: type, timestamp: Date.now() }; // Switch vote
        }
      }).then(result => {
        if (result.snapshot.exists()) {
          const newType = result.snapshot.val().type;
          const countRef = db.ref(`comments/${commentId}/${newType === 'like' ? 'likes' : 'dislikes'}`);
          countRef.transaction(count => (count || 0) + 1);
          if (current && current.type !== newType) {
            const oldCountRef = db.ref(`comments/${commentId}/${current.type === 'like' ? 'likes' : 'dislikes'}`);
            oldCountRef.transaction(count => Math.max(0, (count || 0) - 1));
          }
        } else {
          const oldCountRef = db.ref(`comments/${commentId}/${type === 'like' ? 'likes' : 'dislikes'}`);
          oldCountRef.transaction(count => Math.max(0, (count || 0) - 1));
        }
      });
    }

    // ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ü‡¶ó‡¶≤
    function toggleReplyForm(commentId) {
      const replyForm = document.getElementById(`replyForm-${commentId}`);
      replyForm.style.display = replyForm.style.display === 'none' ? 'flex' : 'none';
    }

    // ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    commentsRef.on('value', snapshot => {
      const commentList = document.getElementById('commentList');
      commentList.innerHTML = '';
      const comments = snapshot.val();
      const isAdmin = localStorage.getItem('isAdmin') === 'true';
      if (comments) {
        Object.entries(comments).reverse().forEach(([key, data]) => {
          const commentDiv = document.createElement('div');
          commentDiv.className = `comment ${data.isAdmin ? 'admin-comment' : ''}`;
          const date = new Date(data.timestamp);
          const userId = getUserId();
          const hasLiked = data.userVotes && data.userVotes[userId] && data.userVotes[userId].type === 'like';
          const hasDisliked = data.userVotes && data.userVotes[userId] && data.userVotes[userId].type === 'dislike';
          commentDiv.innerHTML = `
            <div class="comment-header">
              <span>${data.name}${data.isAdmin ? ' <span class="admin-badge">‡¶è‡¶°‡¶Æ‡¶ø‡¶®</span>' : ''}</span>
              <span>${date.toLocaleString('bn-BD')}</span>
            </div>
            <div class="comment-body">${data.comment}</div>
            <div class="comment-actions">
              <button onclick="toggleLike('${key}', 'like')" style="background: ${hasLiked ? '#0AAFAF' : ''}">
                üëç ‡¶≤‡¶æ‡¶á‡¶ï (${data.likes || 0})
              </button>
              <button onclick="toggleLike('${key}', 'dislike')" style="background: ${hasDisliked ? '#0AAFAF' : ''}">
                üëé ‡¶°‡¶ø‡¶∏‡¶≤‡¶æ‡¶á‡¶ï (${data.dislikes || 0})
              </button>
              <button onclick="toggleReplyForm('${key}')">‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á</button>
              ${isAdmin ? `<button class="delete-button" onclick="deleteComment('${key}')">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button>` : ''}
            </div>
            <div class="reply-form" id="replyForm-${key}">
              <input type="text" id="replyName-${key}" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" maxlength="50">
              <textarea id="replyText-${key}" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." maxlength="500"></textarea>
              <button onclick="submitReply('${key}')">‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
            </div>
            <div class="replies">
              ${data.replies ? Object.entries(data.replies).map(([replyId, reply]) => `
                <div class="reply ${reply.isAdmin ? 'admin-reply' : ''}">
                  <div class="reply-header">
                    <span>${reply.name}${reply.isAdmin ? ' <span class="admin-badge">‡¶è‡¶°‡¶Æ‡¶ø‡¶®</span>' : ''}</span>
                    <span>${new Date(reply.timestamp).toLocaleString('bn-BD')}</span>
                  </div>
                  <div class="reply-body">${reply.reply}</div>
                </div>
              `).join('') : ''}
            </div>
          `;
          commentList.appendChild(commentDiv);
        });
      } else {
        commentList.innerHTML = '<p>‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶®‡ßá‡¶á‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶ï‡¶∞‡ßÅ‡¶®!</p>';
      }
    });

    // ‡¶™‡¶™‡¶Ü‡¶™ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
    function showPopup(message) {
      const popup = document.getElementById('popup');
      const popupMessage = document.getElementById('popupMessage');
      popupMessage.textContent = message;
      popup.style.display = 'block';
      setTimeout(() => {
        popup.style.display = 'none';
      }, 3000);
    }

    // ‡¶™‡¶™‡¶Ü‡¶™ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ
    function closePopup() {
      document.getElementById('popup').style.display = 'none';
    }
  </script>
</body>
</html>
